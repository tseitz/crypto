//@version=4
strategy("SlimScript")
// set up heikin
ha_t = heikinashi(syminfo.tickerid)
ha_open = security(ha_t, timeframe.period, open)
ha_high = security(ha_t, timeframe.period, high)
ha_low = security(ha_t, timeframe.period, low)
ha_close = security(ha_t, timeframe.period, close)
palette = ha_close >= ha_open ? color.green : color.red
plotcandle(ha_open, ha_high, ha_low, ha_close, color=palette)

// don't worry about doji's within margin of error
Precision = input(0.25, minval=0.0001, title="Precision")
doji = abs(open - close) <= (high - low) * Precision
bgcolor(color=doji ? color.yellow : na)

// Look for 2 green candles to long
twoGreenCandles = (close > open) and not doji
bgcolor(color=twoGreenCandles ? color.green : na)

// look for 2 red candles to short
twoRedCandles = (close < open) and not doji
bgcolor(color=twoRedCandles ? color.red : na)

var isLong = false
var isShort = false

long = not isLong and twoGreenCandles
short = not isShort and twoRedCandles

if long
    isLong := true
    isShort := false

if short
    isLong := false
    isShort := true

// plot the plays
plotshape(long, title="long", text="long", style=shape.labelup, location=location.belowbar, size=size.tiny, color=color.green, textcolor=color.white, transp=0)
plotshape(short, title="short", text="short", style=shape.labeldown, location=location.abovebar, size=size.tiny, color=color.red, textcolor=color.white, transp=0)

// set up alert conditions
alertcondition(long, title="heiki go!", message="ha_green")
alertcondition(short, title="heiki chillllll", message="ha_red")